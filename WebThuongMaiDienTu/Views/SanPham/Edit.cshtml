@model WebThuongMaiDienTu.Models.SanPham

@{
    ViewBag.Title = "Edit";
    Layout = "~/Views/Shared/_LayoutDashBoard.cshtml";
}

<link href="~/Content/css/Create.css" rel="stylesheet" />

<div class="container">
    <form action="@Url.Action("Edit", "SanPham")" method="post" enctype="multipart/form-data">
        <h2>Chỉnh SửaThông Tin Sản Phẩm</h2>

        <div class="form-group">
            <label for="maSanPham">Mã Sản Phẩm</label>
            <input type="text" id="maSanPham" name="maSanPham" class="form-control" value="@Model.maSanPham" readonly />
        </div>

        <div class="form-group">
            <label for="tenSanPham">Tên Sản Phẩm</label>
            <input type="text" id="tenSanPham" name="tenSanPham" class="form-control" value="@Model.tenSanPham" />
        </div>

        <div class="form-group">
            <label for="hinhAnh">Hình Ảnh:</label>
            <div class="image-upload-container">
                <div class="file-input-wrapper">
                    <button type="button" class="btn btn-file-input">Chọn hình ảnh</button>
                    <input type="file" id="hinhAnh" name="hinhAnh" accept="image/*" onchange="previewImage(this);" />
                </div>
                <!-- Hiển thị hình ảnh hiện tại nếu có -->
                <img id="imagePreview" src="@Url.Content(Model.hinhAnh ?? "~/Content/Images/no-image.png")"
                     alt="Xem trước hình ảnh" style="display:@(string.IsNullOrEmpty(Model.hinhAnh) ? "none" : "inline-block");" />
            </div>
        </div>


        <div class="form-group">
            <label for="giaBan">Giá Bán</label>
            <input type="number" id="giaBan" name="giaBan" class="form-control" min="0" step="0.01" value="@Model.giaBan" />
        </div>

        <div class="form-group">
            <label for="giaKhuyenMai">Giá Khuyến Mãi</label>
            <input type="number" id="giaKhuyenMai" name="giaKhuyenMai" class="form-control" min="0" step="0.01" value="@Model.giaKhuyenMai" />
        </div>

        <div class="form-group">
            <label for="maHang">Hãng Sản Xuất</label>
            <select id="maHang" name="maHang" class="form-control">
                @*lấy ra danh sách tên hãng từ HangSanXuat*@
                @foreach (var items in ViewBag.HangSanXuat)
                {
                    if (items != null)
                    {
                        <option value="@items.maHang" selected>@items.tenHang</option>
                    }

                }
            </select>
        </div>

        <div class="form-group">
            <label for="moTa">Mô Tả</label>
            <textarea id="moTa" name="moTa" class="form-control" rows="4" maxlength="200">@Model.moTa</textarea>
        </div>

        <div class="form-group">
            <input type="submit" value="Chỉnh Sửa Sản Phẩm" class="btn btn-primary" />
            <a href="@Url.Action("Index", "SanPham")" class="btn btn-secondary">Quay lại</a>
        </div>
    </form>
</div>

<script>
    function previewImage(input) {
        var preview = document.getElementById('imagePreview');
        if (input.files && input.files[0]) {
            var reader = new FileReader();
            reader.onload = function (e) {
                preview.src = e.target.result;
                preview.style.display = 'inline-block';
            }
            reader.readAsDataURL(input.files[0]);
        } else {
            preview.src = "#";
            preview.style.display = 'none';
        }
    }
</script>

